/*! { "name": "vissense-againjs-polling-strategy", "version": "0.0.1", "copyright": "(c) 2015 tbk" } */
!function(a,b){"use strict";var c=a.VisSense,d=c.Utils,e=c.VisMon.Strategy;b(a,c,d,e,a.Again)}(this,function(a,b,c,d,e){"use strict";d.AgainJsPollingStrategy=function(a){var b=c.defaults(a,{fullyvisible:1e3,visible:1e3,hidden:3e3});this._startInternal=function(a){var c=e.create(),d=a.on("visibilitychange",function(a){console.log("[AgainJsPollingStrategy] update againjs timer with "+a.state().state),c.update(a.state().state)}),f=c.every(function(){console.log("[AgainJsPollingStrategy] update monitor by AgainJs "+a.state().state),a.update()},b);return console.log('[AgainJsPollingStrategy] starting againjs timer with "'+a.state().state+'"'),c.update(a.state().state),function(){f(),d()}},this._stopInternal=null,this._started=!1},d.AgainJsPollingStrategy.prototype=Object.create(d.prototype),d.AgainJsPollingStrategy.prototype.start=function(a){return this._started||(this._stopInternal=this._startInternal(a),this._started=!0),this._started},d.AgainJsPollingStrategy.prototype.stop=function(){return this._started?(this._stopInternal(),this._started=!1,!0):!1}});